@page
@model SinusSkateboards.Pages.CartModel
@{
}

<div class="wrapper2">
    <header>
        <h1>
            Sinus Skateboards
            <img src="~/imgs/logos/sinus-logo-landscape -  small.png" />
        </h1>
    </header>
    <nav>
        <a href="/Index">Home</a>
        <form method="post">
            <input id="search" type="search" style="width:400px" asp-for="@Model.SearchString" placeholder="Search product, ex: t-shirt or northern lights or blue" />
            <input type="submit" asp-route-searchString="@Model.SearchString" />
        </form>
    </nav>
    <section>
        <main>
            @foreach (var product in Model.DistinctProducts)
            {
                @foreach (var item in Model.ProductIdCount)
                {
                    if (product.ProductId == item.Key)
                    {
                        if (Model.ProductIdCount[item.Key] > 1)
                        {
                            <article>
                                <img src="~/imgs/products/@product.Image" style="max-width:100px">
                                <h2>@product.Title (Quantity: @item.Value)</h2>
                                <p>@product.Description</p>
                                <p>@product.Color</p>
                                <p>$@product.Price</p>

                                <form method="post">
                                    <p>Product Id: @product.ProductId</p>
                                    <button class="brn btn-danger" asp-page-handler="Delete" asp-route-productId="@product.ProductId">Delete from cart</button>
                                </form>
                            </article>
                            break;

                        }
                        else
                        {
                            <article>
                                <img src="~/imgs/products/@product.Image" style="max-width:100px">
                                <h2>@product.Title</h2>
                                <p>@product.Description</p>
                                <p>@product.Color</p>
                                <p>$@product.Price</p>

                                <form method="post">
                                    <p>Product Id: @product.ProductId</p>
                                    <button class="brn btn-danger" asp-page-handler="Delete" asp-route-productId="@product.ProductId">Delete from cart</button>
                                </form>
                            </article>
                            break;
                        }
                    }
                }
            }
            <article>
                <h2>Total price: $@Model.Cart.TotalPrice</h2>
                <form method="post">
                    <button class="brn btn-success" asp-page="/Checkout">Continue to checkout</button>
                </form>
            </article>
        </main>
        <aside>
            <h4>Clothes</h4>
            <a href="/T-shirts">T-shirts</a>
            <a href="/Hoodies">Hoodies</a>
            <a href="/Caps">Caps</a>

            <h4>Skateboarding</h4>
            <a href="/Boards">Boards</a>
            <a href="/Wheels">Wheels</a>
        </aside>
    </section>
    <footer>
        <article>
            &copy; 2021 - Sinus Skateboards</p>
            <a href="/About">About</a>
        </article>
    </footer>
</div>
